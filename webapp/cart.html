<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ö–æ—Ä–∑–∏–Ω–∞ - Lavander Shop</title>
  <link rel="stylesheet" href="./public/styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
  <header>
    <div>
      <h1>Lavander Shop üõí</h1>
      <p>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</p>
    </div>
    <a href="./index.html" class="back-button">‚Üê –ù–∞–∑–∞–¥</a>
  </header>

  <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–æ—Ä–∑–∏–Ω—ã -->
  <main class="cart-container">
    <h2>–ö–æ—Ä–∑–∏–Ω–∞</h2>
    <div id="cart-items"></div>
    <div id="empty-cart-message" class="empty-cart">–î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω—É! üò∫</div>
    <div id="total-amount" style="margin-top: 1rem; font-size: 1.25rem; color: #6b21a8; font-weight: 700;">–ò—Ç–æ–≥–æ: 0 –≥—Ä–Ω</div>
    <button id="checkout-button" class="checkout-button" disabled onclick="checkout()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
  </main>

  <!-- –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å -->
  <footer>
    <p>¬© 2025 Lavander Shop</p>
  </footer>

  <script>
    let cart = JSON.parse(localStorage.getItem('cart')) || [];

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ—Ä–∑–∏–Ω—ã
    function initializeCart() {
      cart = cart.map(item => ({ ...item, quantity: item.quantity || 1 }));
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCart();
    }

    // –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–∞
    function changeQuantity(index, change) {
      if (cart[index].quantity + change < 1) return;
      cart[index].quantity += change;
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCart();
    }

    // –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
    function removeFromCart(index) {
      cart.splice(index, 1);
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCart();
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã
    function updateCart() {
      const cartItems = document.getElementById('cart-items');
      const emptyCartMessage = document.getElementById('empty-cart-message');
      const checkoutButton = document.getElementById('checkout-button');
      const totalAmount = document.getElementById('total-amount');

      cartItems.innerHTML = '';
      const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
      totalAmount.textContent = `–ò—Ç–æ–≥–æ: ${total} –≥—Ä–Ω`;

      if (cart.length === 0) {
        emptyCartMessage.style.display = 'block';
        checkoutButton.disabled = true;
        totalAmount.style.display = 'none';
      } else {
        emptyCartMessage.style.display = 'none';
        checkoutButton.disabled = false;
        totalAmount.style.display = 'block';
        cart.forEach((item, index) => {
          const cartItem = document.createElement('div');
          cartItem.className = 'cart-item';
          cartItem.innerHTML = `
            <span>${item.name} - ${item.price * item.quantity} –≥—Ä–Ω</span>
            <div class="quantity-control">
              <button onclick="changeQuantity(${index}, -1)">-</button>
              <span>${item.quantity}</span>
              <button onclick="changeQuantity(${index}, 1)">+</button>
            </div>
            <button class="remove-button" onclick="removeFromCart(${index})">–£–¥–∞–ª–∏—Ç—å</button>
          `;
          cartItems.appendChild(cartItem);
        });
      }
    }

    // –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
    function checkout() {
      alert('–°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞–∫–∞–∑! –°–∫–æ—Ä–æ —Å –≤–∞–º–∏ —Å–≤—è–∂—É—Ç—Å—è –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è. üòä');
      cart = [];
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCart();
    }

    // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    window.onload = initializeCart;
  </script>
</body>
</html>